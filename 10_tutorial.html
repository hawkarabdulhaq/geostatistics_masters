<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tutorial — Foundations of Statistical Thinking with NDVI (EN) — University of Szeged</title>
<style>
  :root{
    --bg:#f7f9fb; --card:#ffffff; --ink:#0f172a; --muted:#475569;
    --accent:#2563eb; --accent-2:#38bdf8; --border:#e2e8f0; --shadow:0 10px 30px rgba(2,6,23,.08);
    --chip:rgba(56,189,248,.15);
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0b1220; --card:#101726; --ink:#e6ebf5; --muted:#95a3b8;
      --accent:#60a5fa; --accent-2:#22d3ee; --border:#1f2a44; --shadow:0 10px 30px rgba(0,0,0,.5);
      --chip:rgba(96,165,250,.18);
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0; padding:2rem; background:var(--bg); color:var(--ink);
    font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji";
  }
  .wrap{max-width:1100px; margin-inline:auto}
  header{
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    color:#fff; border-radius:16px; padding:1rem 1.25rem; box-shadow:var(--shadow);
  }
  .header-top{display:flex; align-items:center; justify-content:space-between; gap:1rem; flex-wrap:wrap}
  .title{display:flex; align-items:center; gap:.75rem; flex-wrap:wrap}
  .badge{
    font-size:.8rem; letter-spacing:.04em; text-transform:uppercase;
    background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.35);
    padding:.25rem .5rem; border-radius:999px;
  }
  h1{margin:0; font-size:1.35rem; font-weight:700}
  h2{margin:.25rem 0 0; font-size:1rem; font-weight:500; opacity:.95}
  .logo-row{display:flex; align-items:center; gap:.75rem; flex-wrap:wrap}
  .logo-chip{display:flex; align-items:center; justify-content:center; background:#fff; border:1px solid rgba(0,0,0,.08); border-radius:10px; padding:.35rem .5rem; box-shadow:var(--shadow)}
  .logo-chip img{display:block; height:42px; width:auto; object-fit:contain}
  .logo-chip.logo-dept img{height:55px}
  .logo-chip.logo-szte img{height:42px}

  .card{background:var(--card); border:1px solid var(--border); border-radius:16px; margin-top:1rem; box-shadow:var(--shadow); overflow:hidden}
  .bar{padding:.9rem 1rem; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; gap:1rem; flex-wrap:wrap}
  .subtitle{font-weight:600}
  .hint{color:var(--muted); font-size:.92rem}
  .btn{border:1px solid var(--border); background:transparent; color:var(--ink); padding:.45rem .7rem; border-radius:10px; cursor:pointer; font-weight:600}
  .btn:hover{border-color:var(--accent); color:var(--accent)}
  .btn.primary{background:var(--accent); color:#fff; border-color:transparent}
  .btn.primary:hover{filter:brightness(1.05)}
  .section{padding:1rem}
  .grid-2{display:grid; grid-template-columns:1fr; gap:1rem}
  @media (min-width:900px){ .grid-2{grid-template-columns:1fr 1fr} }
  ul{margin:.4rem 0 .8rem}
  .chip{display:inline-block; font-size:.78rem; font-weight:800; letter-spacing:.04em; background:var(--chip); color:#0369a1; border:1px solid var(--border); border-radius:8px; padding:.18rem .5rem; margin-right:.4rem}
  pre{background:#0b1220; color:#e6ebf5; padding:.85rem 1rem; border-radius:12px; overflow:auto; font-size:.95rem}
  code,kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace}
  .copy-row{display:flex; gap:.5rem; align-items:center; margin:.5rem 0}
  .callout{border-left:4px solid var(--accent); background:rgba(37,99,235,.06); padding:.7rem .9rem; border-radius:8px; margin:.5rem 0}
  .rubric{display:grid; grid-template-columns:1fr; gap:.6rem}
  .rubric .item{border:1px solid var(--border); border-radius:12px; padding:.75rem .9rem; background:rgba(148,163,184,.06)}
  .item strong{display:inline-block; min-width:2.5rem}
  .list-tight li{margin:.25rem 0}
  .foot{margin-top:.75rem}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace}
</style>
<script>
  function copyFrom(id){
    const el = document.getElementById(id);
    const text = el.innerText || el.textContent;
    if(!navigator.clipboard){ // fallback
      const ta = document.createElement('textarea');
      ta.value = text; document.body.appendChild(ta); ta.select();
      try{ document.execCommand('copy'); } finally { document.body.removeChild(ta); }
      return;
    }
    navigator.clipboard.writeText(text);
  }
  function printPage(){ window.print(); }
</script>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="header-top">
        <div class="title">
          <span class="badge">University of Szeged</span>
          <h1>Foundations of Statistical Thinking with NDVI — Tutorial</h1>
        </div>
        <div class="logo-row" aria-label="Department and University logos">
          <span class="logo-chip logo-dept" title="Department logo">
            <img src="https://geosci.u-szeged.hu/site/upload/2024/10/logo_v2_2_64x55.png" alt="Department of Atmospheric and Geospatial Data Science logo">
          </span>
          <span class="logo-chip logo-szte" title="SZTE logo">
            <img src="https://u-szeged.hu/site/design3/img/szte_logo_en.jpg" alt="University of Szeged logo (English)">
          </span>
        </div>
      </div>
      <h2>Goal: run <span class="mono">ndvi_foundations.py</span> on an NDVI GeoTIFF and write a concise, evidence‑based report.</h2>
    </header>

    <!-- 0) Setup & Data -->
    <section class="card">
      <div class="bar">
        <div>
          <div class="subtitle">0) Setup &amp; Data</div>
          <div class="hint">Prereqs, script, and your raster.</div>
        </div>
        <div>
          <button class="btn" onclick="printPage()">Print</button>
        </div>
      </div>
      <div class="section grid-2">
        <div>
          <p><span class="chip">Prerequisites</span></p>
          <ul class="list-tight">
            <li>Python 3.9+ installed.</li>
            <li>Packages: <code>rasterio</code>, <code>numpy</code>, <code>pandas</code>, <code>matplotlib</code>.</li>
          </ul>
          <p><span class="chip">Script</span></p>
          <p>Use your saved script: <strong>ndvi_foundations.py</strong>.<br>
             Script example (mind the path): <a href="https://github.com/hawkarabdulhaq/geostatistics_masters/blob/main/statistical_thinking.py">statistical_thinking.py</a></p>
          <div class="callout"><strong>Be careful:</strong> update file paths before running.</div>
        </div>
        <div>
          <p><span class="chip">Your raster</span></p>
          <p>Pick an NDVI GeoTIFF for your area of interest (values typically in [-1,1]).</p>
          <p class="hint">If your landscape differs, you can tune thresholds later and re‑run.</p>
        </div>
      </div>
    </section>

    <!-- 1) Run -->
    <section class="card">
      <div class="bar">
        <div>
          <div class="subtitle">1) Run</div>
          <div class="hint">Use your path in quotes; adjust thresholds and bootstrap reps as needed.</div>
        </div>
        <div class="copy-row">
          <button class="btn" onclick="copyFrom('cmd-run')">Copy command</button>
        </div>
      </div>
      <div class="section">
        <pre id="cmd-run">python ndvi_foundations.py "/path/to/your/ndvi.tif" \
  --out ndvi_foundations_report \
  --thresholds 0.2 0.3 0.5 \
  --boot 1000 \
  --seed 42</pre>

        <div class="grid-2">
          <div>
            <p><strong>What gets created — Deterministic</strong></p>
            <ul>
              <li><code>deterministic_stats.csv</code> — count, min, quantiles, mean, std</li>
              <li><code>ndvi_histogram.png</code>, <code>ndvi_ecdf.png</code></li>
              <li><code>deterministic_area_proportions.csv</code> — proportion NDVI ≥ thresholds</li>
            </ul>
          </div>
          <div>
            <p><strong>What gets created — Uncertainty (Stochastic)</strong></p>
            <ul>
              <li><code>bootstrap_draws.csv</code>, <code>bootstrap_confidence_intervals.csv</code></li>
              <li><code>bootstrap_distributions.png</code></li>
            </ul>
          </div>
          <div>
            <p><strong>Sampling Concepts</strong></p>
            <ul>
              <li><code>lln_error_vs_n.png</code>, <code>lln_sampling_errors.csv</code></li>
              <li><code>biased_vs_random.png</code>, <code>biased_vs_random.csv</code></li>
            </ul>
          </div>
          <div>
            <p><strong>Map &amp; Areas by Class</strong></p>
            <ul>
              <li><code>ndvi_classes.tif</code> (paletted), <code>ndvi_classes.png</code> (legend)</li>
              <li><code>ndvi_area_by_class.csv</code>, <code>ndvi_area_by_class.png</code> (equal‑area EPSG:6933)</li>
            </ul>
          </div>
        </div>

        <p class="hint foot"><strong>Tip:</strong> If your landscape differs, adjust <code>--thresholds</code> (e.g., <code>0.1 0.25 0.4</code>) and re‑run.</p>
      </div>
    </section>

    <!-- 2) Deliverables -->
    <section class="card">
      <div class="bar">
        <div class="subtitle">2) Deliverables</div>
        <div class="hint">PDF report (≤ 4 pages) + output folder ZIP.</div>
      </div>
      <div class="section">
        <p>Submit a <strong>PDF report (max 4 pages)</strong> plus the <code>ndvi_foundations_report/</code> output folder (zipped).</p>
        <p>Your report must include four short sections tied to the Foundations topics below and <em>cite specific numbers/figures</em> from the output.</p>

        <h3>Section A — Deterministic vs. Stochastic Models (≈ 1 page)</h3>
        <ul>
          <li><strong>Deterministic:</strong> Report single‑value summaries from <code>deterministic_stats.csv</code> (mean, median, p25/p75, std). Reference <code>ndvi_histogram.png</code> and <code>ndvi_ecdf.png</code>. Explain these as <em>point estimates</em> (one fixed answer).</li>
          <li><strong>Stochastic (uncertainty):</strong> Use <code>bootstrap_confidence_intervals.csv</code>. Report 95% CIs for mean, median, p95, and each <code>prop_ge_threshold</code>. Reference <code>bootstrap_distributions.png</code>. Explain how resampling yields <em>ranges of plausible values</em>.</li>
        </ul>
        <div class="callout">
          <strong>Interpretation prompt:</strong><br>
          If the deterministic mean is <em>μ̂</em> but the 95% CI is <em>[L, U]</em>, what does this say about uncertainty in your study area?<br>
          Compare the deterministic proportion NDVI ≥ 0.3 to its bootstrapped CI. Would a small management decision be sensitive to this uncertainty?
        </div>

        <h3>Section B — What is Statistics (vs. Mathematics) (≈ ½ page)</h3>
        <ul>
          <li>Explain, using your outputs, how <em>statistics</em> relies on observed data and quantifies uncertainty, while <em>mathematics</em> reasons about abstract, exact relationships.</li>
          <li>Give a concrete example: “Our deterministic NDVI mean is X, but the CI is <em>[L, U]</em>, highlighting uncertainty and sampling variability.”</li>
        </ul>

        <h3>Section C — Population and Statistical Sample (≈ 1 page)</h3>
        <ul>
          <li><strong>Population:</strong> all valid NDVI pixels in the raster. Report the total valid count (<code>deterministic_stats.csv → count_valid</code>).</li>
          <li><strong>Bootstrap:</strong> describe how resampling pixels with replacement approximates sampling variability.</li>
          <li><strong>LLN demo:</strong> summarize <code>lln_error_vs_n.png</code> / <code>lln_sampling_errors.csv</code> on how median and 95th‑percentile absolute error of the sample mean shrink as <em>n</em> grows. State a concrete observation (e.g., when <em>n</em> increases from 100 to 10,000, median absolute error decreases from … to …).</li>
          <li><strong>Biased sampling:</strong> compare random vs. biased (top‑left quadrant) means across <em>n</em> using <code>biased_vs_random.png</code>. Note whether the quadrant appears greener/less green than the population and how bias persists or shrinks.</li>
          <li><strong>Conclude:</strong> why representativity matters for inference.</li>
        </ul>

        <h3>Section D — Random Variables (one‑variable context) (≈ ½–1 page)</h3>
        <ul>
          <li>Treat NDVI at a randomly chosen valid pixel as a random variable <em>X</em>.</li>
          <li>Use the histogram and ECDF to describe distribution (central tendency, spread, skew, multimodality if any).</li>
          <li>Use <code>ndvi_area_by_class.csv</code> and <code>ndvi_classes.png</code> to interpret geographic structure: report area (km²) by class and discuss alignment with the distributional summary.</li>
          <li><em>Optional:</em> comment on the upper tail (p95 CI) relative to thresholds and what it implies about high‑vigour vegetation.</li>
        </ul>
      </div>
    </section>

    <!-- 3) Report Template -->
    <section class="card">
      <div class="bar">
        <div class="subtitle">3) Report Template (copy‑paste into your document)</div>
        <div class="copy-row">
          <button class="btn" onclick="copyFrom('tpl-report')">Copy template</button>
        </div>
      </div>
      <div class="section">
<pre id="tpl-report">Title: Foundations of Statistical Thinking with NDVI (Your Area)

Data & Run Settings
• GeoTIFF path: ".../your.tif"
• Thresholds: [ ... ]
• Bootstrap reps: ...
• Seed: ...

A. Deterministic vs. Stochastic
• Deterministic stats: mean ..., median ..., p25 ..., p75 ..., std ...
• 95% CIs: mean [L,U], median [L,U], p95 [L,U], prop_ge_... [L,U]
• Figures: ndvi_histogram.png; ndvi_ecdf.png; bootstrap_distributions.png
• Brief interpretation (3–5 sentences).

B. What is Statistics vs. Mathematics
• Short explanation (3–6 sentences) linked to your CI results.

C. Population & Sample
• Population size (valid pixels): ...
• LLN: quantitative observations from lln_error_vs_n.png
• Biased vs random: key differences and implications (with biased_vs_random.png).

D. Random Variable
• Distributional shape from histogram & ECDF
• Area by class (top 3 takeaways) with ndvi_area_by_class.csv and ndvi_classes.png.

References to Output Files (as a list)</pre>
      </div>
    </section>

    <!-- 4) Grading Rubric -->
    <section class="card">
      <div class="bar">
        <div class="subtitle">4) Grading Rubric (100 pts)</div>
      </div>
      <div class="section rubric">
        <div class="item"><strong>10 pts</strong> Execution &amp; Reproducibility — Script runs; output folder provided; thresholds/seed logged.</div>
        <div class="item"><strong>30 pts</strong> Deterministic vs. Stochastic — Correct stats &amp; CIs; accurate interval explanation; figures support claims.</div>
        <div class="item"><strong>10 pts</strong> Statistics vs. Mathematics — Clear, concise contrast grounded in your results.</div>
        <div class="item"><strong>30 pts</strong> Population &amp; Sample — Population defined; LLN trend with numbers; bias demo interpreted (representativity).</div>
        <div class="item"><strong>15 pts</strong> Random Variable — Distribution described from histogram/ECDF; class areas reported; map used to interpret patterns.</div>
        <div class="item"><strong>5 pts</strong> Clarity &amp; Brevity — ≤ 4 pages, tidy tables/figures, direct file references.</div>
      </div>
    </section>

    <!-- 5) Common Pitfalls -->
    <section class="card">
      <div class="bar">
        <div class="subtitle">5) Common Pitfalls to Avoid</div>
      </div>
      <div class="section">
        <ul>
          <li><strong>Misreading CIs:</strong> A 95% CI is a range produced by a procedure that would cover the true value in 95% of repeated samples—not a 95% chance that this specific interval contains the truth.</li>
          <li><strong>Bias vs. sample size:</strong> A biased sampling frame (e.g., one quadrant) remains biased even as <em>n</em> grows; larger <em>n</em> does not magically fix bias.</li>
          <li><strong>Thresholds:</strong> If defaults don’t fit your landscape, justify different thresholds and re‑run the script.</li>
        </ul>
      </div>
    </section>

  </div>
</body>
</html>
